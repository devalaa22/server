name: Ubuntu Desktop - Chrome RDP

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    timeout-minutes: 9999

    steps:
      - name: Install XFCE Desktop & Chrome Remote Desktop
        run: |
          sudo apt update
          sudo apt install -y xfce4 xfce4-goodies
          sudo apt install -y wget curl unzip nano

          # ุชุซุจูุช Google Chrome Remote Desktop
          wget https://dl.google.com/linux/direct/chrome-remote-desktop_current_amd64.deb
          sudo dpkg -i chrome-remote-desktop_current_amd64.deb || sudo apt -f install -y
          sudo apt install -f -y

          # ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ (ุงุฎุชูุงุฑู)
          sudo useradd -m githubuser
          echo 'githubuser:123456' | sudo chpasswd
          sudo usermod -aG sudo githubuser

          # ุฅุนุฏุงุฏ Chrome Remote Desktop
          sudo bash -c 'echo "exec /usr/sbin/lightdm-session startxfce4" > /etc/chrome-remote-desktop-session'
          sudo systemctl disable lightdm.service

          # ุฅุนุฏุงุฏ ุตูุงุญูุงุช
          sudo usermod -a -G chrome-remote-desktop githubuser

          echo "โ ูู ุดูุก ุชู ุชุซุจูุชูุ ุงูุขู ุชุญุชุงุฌ ููุชุงุญ Chrome Remote Desktop"

      - name: ุชุนูููุงุช Chrome Remote Desktop
        run: |
          echo "๐ ุงูุชุญ ูุฐุง ุงูุฑุงุจุท ูุณุฌู ุฏุฎููู:"
          echo "https://remotedesktop.google.com/headless"
          echo ""
          echo "โช๏ธ ุงุฎุชูุฑ 'Debian Linux' ูุงูุณุฎ ุงูุฃูุฑ ุงูุฐู ูุธูุฑ ูู"
          echo "๐ ุซู ุนุฏูู ูุฐุง ุงูููู ูุถุนู ุจุฏู <PASTE_COMMAND_HERE> ูู ุงูุณุทุฑ ุงูุชุงูู"

      - name: ุถุน ููุฏ Google Remote Desktop ููุง
        run: |
          # โ๏ธ ุงูุตู ุฃูุฑ ุงูุชุณุฌูู ููุง ูู ูููุน Google Remote Desktop
          echo "โ ูู ูุชู ูุถุน ุฃูุฑ ุงูุชุณุฌูู ุจุนุฏ"
          echo "๐ ุงูุชุญ https://remotedesktop.google.com/headless ูุณุฌูู ุฏุฎููู ูุงูุณุฎ ุงูุฃูุฑ"
